<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Mouse Tracker - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            cursor: none;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative;
        }

        .cat-container {
            position: relative;
            transform-origin: center;
            transition: transform 0.2s ease-out;
        }

        .cat {
            width: 300px;
            height: 300px;
            background-image: url('https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80');
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: float 3s ease-in-out infinite;
            border: 4px solid rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .cat::before {
            content: '';
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            background-size: 300% 300%;
            animation: gradientMove 4s ease infinite;
            z-index: -1;
            opacity: 0.4;
        }

        .cat::after {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            z-index: -1;
        }

        .eyes {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 45px;
        }

        .eye {
            width: 28px;
            height: 28px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50%;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .pupil {
            width: 14px;
            height: 14px;
            background: #000;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.1s ease-out;
        }

        .pupil::after {
            content: '';
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
        }

        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ff6b6b, #ff5252);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .title {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            text-align: center;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        .instructions {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .cat-counter {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .collision-info {
            position: absolute;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .sparkles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: sparkleFloat 3s linear infinite;
        }

        .popup-cat {
            position: fixed;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            pointer-events: none;
            z-index: 999;
            border: 3px solid white;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .spawned-cat {
            position: absolute;
            width: 120px;
            height: 120px;
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.8);
            animation: spawnIn 0.3s ease-out;
            transform-origin: center;
            will-change: transform;
            transition: border-color 0.1s ease;
        }

        .spawned-cat.collision {
            border-color: #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.6), 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .spawned-cat::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            background-size: 300% 300%;
            animation: gradientMove 4s ease infinite;
            z-index: -1;
            opacity: 0.3;
        }

        .spawned-cat .eyes {
            top: 28%;
            gap: 22px;
        }

        .spawned-cat .eye {
            width: 16px;
            height: 16px;
        }

        .spawned-cat .pupil {
            width: 8px;
            height: 8px;
        }

        .spawned-cat .pupil::after {
            width: 2px;
            height: 2px;
        }

        /* Different eye positions for different cat images */
        .spawned-cat[data-cat-type="0"] .eyes { top: 32%; gap: 18px; }
        .spawned-cat[data-cat-type="1"] .eyes { top: 25%; gap: 24px; }
        .spawned-cat[data-cat-type="2"] .eyes { top: 30%; gap: 20px; }
        .spawned-cat[data-cat-type="3"] .eyes { top: 28%; gap: 22px; }
        .spawned-cat[data-cat-type="4"] .eyes { top: 26%; gap: 19px; }
        .spawned-cat[data-cat-type="5"] .eyes { top: 29%; gap: 21px; }
        .spawned-cat[data-cat-type="6"] .eyes { top: 27%; gap: 23px; }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.3); }
            100% { text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 255, 255, 0.6); }
        }

        @keyframes sparkleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10px) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes spawnIn {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(5deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.8);
            }
        }

        @keyframes collisionFlash {
            0%, 100% { 
                border-color: rgba(255, 255, 255, 0.8);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            }
            50% { 
                border-color: #ff6b6b;
                box-shadow: 0 0 20px rgba(255, 107, 107, 0.8), 0 15px 30px rgba(0, 0, 0, 0.3);
            }
        }

        @media (max-width: 768px) {
            .cat {
                width: 250px;
                height: 250px;
            }
            
            .title {
                font-size: 2rem;
                top: 30px;
            }
            
            .eyes {
                gap: 38px;
            }

            .spawned-cat {
                width: 100px;
                height: 100px;
            }

            .instructions {
                font-size: 0.9rem;
                bottom: 20px;
            }

            .cat-counter {
                font-size: 1rem;
                top: 100px;
            }

            .collision-info {
                font-size: 0.8rem;
                top: 125px;
            }
        }
    </style>
</head>
<body>
    <div class="custom-cursor" id="cursor"></div>
    
    <div class="title">🐱 Follow My Gaze 🐱</div>
    
    <div class="cat-counter" id="catCounter">Bouncing Cats: 0 / 200</div>
    <div class="collision-info" id="collisionInfo">Collisions: 0</div>
    
    <div class="instructions">
        Left Click: Spawn fast cats | Right Click: Add bouncing marble cats with collisions
    </div>
    
    <div class="sparkles" id="sparkles"></div>
    
    <div class="container">
        <div class="cat-container" id="catContainer">
            <div class="cat" id="cat">
                <div class="eyes">
                    <div class="eye">
                        <div class="pupil" id="leftPupil"></div>
                    </div>
                    <div class="eye">
                        <div class="pupil" id="rightPupil"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let mouseX = window.innerWidth / 2;
        let mouseY = window.innerHeight / 2;
        let spawnedCats = [];
        let animationId;
        let totalCollisions = 0;
        
        const cursor = document.getElementById('cursor');
        const cat = document.getElementById('cat');
        const catContainer = document.getElementById('catContainer');
        const leftPupil = document.getElementById('leftPupil');
        const rightPupil = document.getElementById('rightPupil');
        const sparklesContainer = document.getElementById('sparkles');
        const catCounter = document.getElementById('catCounter');
        const collisionInfo = document.getElementById('collisionInfo');

        // Cute cat images for popup effect
        const catImages = [
            'https://images.unsplash.com/photo-1574158622682-e40e69881006?ixlib=rb-4.0.3&w=400&q=80', // Orange kitten
            'https://images.unsplash.com/photo-1513245543132-31f507417b26?ixlib=rb-4.0.3&w=400&q=80', // Cute white kitten
            'https://images.unsplash.com/photo-1583337130417-3346a1be7dee?ixlib=rb-4.0.3&w=400&q=80', // Fluffy gray kitten
            'https://images.unsplash.com/photo-1571566882372-1598d88abd90?ixlib=rb-4.0.3&w=400&q=80', // Black and white kitten
            'https://images.unsplash.com/photo-1592194996308-7b43878e84a6?ixlib=rb-4.0.3&w=400&q=80', // Tabby kitten
            'https://images.unsplash.com/photo-1606214174585-fe31582dc6ee?ixlib=rb-4.0.3&w=400&q=80', // Sleepy kitten
            'https://images.unsplash.com/photo-1595433707802-6b2626ef1c91?ixlib=rb-4.0.3&w=400&q=80', // Playful kitten
        ];

        // Initialize cursor position
        cursor.style.left = mouseX + 'px';
        cursor.style.top = mouseY + 'px';

        // Disable right-click context menu
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });

        // Track mouse movement
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            // Update custom cursor
            cursor.style.left = mouseX + 'px';
            cursor.style.top = mouseY + 'px';
            
            updateCatGaze();
            updateCatRotation();
        });

        // Handle left click to spawn popup cats
        document.addEventListener('click', (e) => {
            if (e.button === 0) { // Left click
                createPopupCats(e.clientX, e.clientY);
            }
        });

        // Handle right click to spawn tracking cats
        document.addEventListener('mousedown', (e) => {
            if (e.button === 2) { // Right click
                e.preventDefault();
                spawnTrackingCat(e.clientX, e.clientY);
            }
        });

        function updateCatGaze() {
            const catRect = cat.getBoundingClientRect();
            const catCenterX = catRect.left + catRect.width / 2;
            const catCenterY = catRect.top + catRect.height / 2;

            // Calculate eye positions relative to cat (adjusted for better positioning)
            const leftEyeX = catCenterX - 22;
            const leftEyeY = catCenterY - 45;
            const rightEyeX = catCenterX + 22;
            const rightEyeY = catCenterY - 45;

            // Calculate pupil positions for both eyes
            updatePupil(leftPupil, leftEyeX, leftEyeY);
            updatePupil(rightPupil, rightEyeX, rightEyeY);
        }

        function updatePupil(pupil, eyeX, eyeY) {
            const maxDistance = 7; // Maximum pupil movement
            
            const deltaX = mouseX - eyeX;
            const deltaY = mouseY - eyeY;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            const limitedDistance = Math.min(distance, maxDistance);
            const angle = Math.atan2(deltaY, deltaX);
            
            const pupilX = Math.cos(angle) * limitedDistance;
            const pupilY = Math.sin(angle) * limitedDistance;
            
            pupil.style.transform = `translate(calc(-50% + ${pupilX}px), calc(-50% + ${pupilY}px))`;
        }

        function updateCatRotation() {
            const catRect = cat.getBoundingClientRect();
            const catCenterX = catRect.left + catRect.width / 2;
            const catCenterY = catRect.top + catRect.height / 2;
            
            const deltaX = mouseX - catCenterX;
            const deltaY = mouseY - catCenterY;
            const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);
            
            // Gentle rotation towards mouse (limited range)
            const limitedAngle = Math.max(-15, Math.min(15, angle * 0.1));
            catContainer.style.transform = `rotate(${limitedAngle}deg)`;
        }

        function updateCatCounter() {
            catCounter.textContent = `Bouncing Cats: ${spawnedCats.length} / 200`;
        }

        function updateCollisionCounter() {
            collisionInfo.textContent = `Collisions: ${totalCollisions}`;
        }

        // Check collision between two cats
        function checkCollision(cat1, cat2) {
            const dx = cat1.x - cat2.x;
            const dy = cat1.y - cat2.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const minDistance = 60; // Radius of each cat is about 60px (120px diameter / 2)
            
            return distance < minDistance;
        }

        // Resolve collision between two cats using elastic collision physics
        function resolveCollision(cat1, cat2) {
            // Calculate collision vector
            const dx = cat2.x - cat1.x;
            const dy = cat2.y - cat1.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance === 0) return; // Prevent division by zero
            
            // Normalize collision vector
            const nx = dx / distance;
            const ny = dy / distance;
            
            // Separate overlapping cats
            const overlap = 60 - distance;
            if (overlap > 0) {
                const separationX = (overlap / 2) * nx;
                const separationY = (overlap / 2) * ny;
                
                cat1.x -= separationX;
                cat1.y -= separationY;
                cat2.x += separationX;
                cat2.y += separationY;
            }
            
            // Calculate relative velocity
            const dvx = cat2.vx - cat1.vx;
            const dvy = cat2.vy - cat1.vy;
            
            // Calculate relative velocity in collision normal direction
            const dvn = dvx * nx + dvy * ny;
            
            // Do not resolve if velocities are separating
            if (dvn > 0) return;
            
            // Apply collision response (elastic collision)
            const restitution = 0.8; // Bounciness factor
            const impulse = 2 * dvn / 2; // Assuming equal mass
            
            cat1.vx += impulse * nx * restitution;
            cat1.vy += impulse * ny * restitution;
            cat2.vx -= impulse * nx * restitution;
            cat2.vy -= impulse * ny * restitution;
            
            // Add visual feedback for collision
            cat1.element.style.animation = 'collisionFlash 0.3s ease-out';
            cat2.element.style.animation = 'collisionFlash 0.3s ease-out';
            
            // Remove animation class after animation completes
            setTimeout(() => {
                cat1.element.style.animation = '';
                cat2.element.style.animation = '';
            }, 300);
            
            totalCollisions++;
            updateCollisionCounter();
        }

        // Check and resolve all collisions
        function handleCollisions() {
            for (let i = 0; i < spawnedCats.length; i++) {
                for (let j = i + 1; j < spawnedCats.length; j++) {
                    if (checkCollision(spawnedCats[i], spawnedCats[j])) {
                        resolveCollision(spawnedCats[i], spawnedCats[j]);
                    }
                }
            }
        }

        // Physics animation loop for bouncing cats
        function animate() {
            // Handle collisions first
            handleCollisions();
            
            spawnedCats.forEach(catData => {
                const catElement = catData.element;
                
                // Update position
                catData.x += catData.vx;
                catData.y += catData.vy;
                
                // Bounce off walls
                const catSize = 120; // Size of spawned cats
                if (catData.x <= catSize/2) {
                    catData.x = catSize/2;
                    catData.vx = Math.abs(catData.vx);
                }
                if (catData.x >= window.innerWidth - catSize/2) {
                    catData.x = window.innerWidth - catSize/2;
                    catData.vx = -Math.abs(catData.vx);
                }
                if (catData.y <= catSize/2) {
                    catData.y = catSize/2;
                    catData.vy = Math.abs(catData.vy);
                }
                if (catData.y >= window.innerHeight - catSize/2) {
                    catData.y = window.innerHeight - catSize/2;
                    catData.vy = -Math.abs(catData.vy);
                }
                
                // Update DOM position
                catElement.style.left = (catData.x - catSize/2) + 'px';
                catElement.style.top = (catData.y - catSize/2) + 'px';
                
                // Update eye tracking
                const catRect = catElement.getBoundingClientRect();
                const catCenterX = catRect.left + catRect.width / 2;
                const catCenterY = catRect.top + catRect.height / 2;

                // Calculate eye positions relative to spawned cat (adjusted for each cat type)
                const eyeOffset = getEyeOffset(catData.catType);
                const leftEyeX = catCenterX - eyeOffset.gapX;
                const leftEyeY = catCenterY - eyeOffset.offsetY;
                const rightEyeX = catCenterX + eyeOffset.gapX;
                const rightEyeY = catCenterY - eyeOffset.offsetY;

                // Update pupils for spawned cat
                updatePupilSpawned(catData.leftPupil, leftEyeX, leftEyeY);
                updatePupilSpawned(catData.rightPupil, rightEyeX, rightEyeY);
            });
            
            animationId = requestAnimationFrame(animate);
        }

        function getEyeOffset(catType) {
            // Adjusted eye positions for each cat image to match actual cat eyes
            const offsets = [
                { gapX: 9, offsetY: 20 },   // Orange kitten
                { gapX: 12, offsetY: 30 },  // White kitten  
                { gapX: 10, offsetY: 25 },  // Gray kitten
                { gapX: 11, offsetY: 22 },  // Black and white
                { gapX: 9.5, offsetY: 27 }, // Tabby
                { gapX: 10.5, offsetY: 23 },// Sleepy
                { gapX: 11.5, offsetY: 24 } // Playful
            ];
            return offsets[catType] || offsets[0];
        }

        function updatePupilSpawned(pupil, eyeX, eyeY, maxDist = 3) {
            const deltaX = mouseX - eyeX;
            const deltaY = mouseY - eyeY;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            const limitedDistance = Math.min(distance, maxDist);
            const angle = Math.atan2(deltaY, deltaX);
            
            const pupilX = Math.cos(angle) * limitedDistance;
            const pupilY = Math.sin(angle) * limitedDistance;
            
            pupil.style.transform = `translate(calc(-50% + ${pupilX}px), calc(-50% + ${pupilY}px))`;
        }

        // Create popup cats on left click with faster bouncing animation
        function createPopupCats(clickX, clickY) {
            // Random number of cats (1-3)
            const numCats = Math.floor(Math.random() * 3) + 1;
            
            for (let i = 0; i < numCats; i++) {
                const popupCat = document.createElement('div');
                popupCat.className = 'popup-cat';
                
                // Random cat image
                const randomImage = catImages[Math.floor(Math.random() * catImages.length)];
                popupCat.style.backgroundImage = `url('${randomImage}')`;
                
                // Random direction and INCREASED distance for faster movement
                const angle = Math.random() * 2 * Math.PI;
                const distance = 150 + Math.random() * 250; // Increased from 80-200 to 150-400px
                const bounceX = Math.cos(angle) * distance;
                const bounceY = Math.sin(angle) * distance;
                
                popupCat.style.left = clickX + 'px';
                popupCat.style.top = clickY + 'px';
                
                // Create custom keyframes for faster animation
                const keyframeName = `bounceOut${Date.now()}${i}`;
                const keyframes = `
                    @keyframes ${keyframeName} {
                        0% {
                            transform: translate(-50%, -50%) scale(0) rotate(0deg);
                            opacity: 1;
                        }
                        10% {
                            transform: translate(-50%, -50%) scale(1.4) rotate(20deg);
                            opacity: 1;
                        }
                        25% {
                            transform: translate(calc(-50% + ${bounceX * 0.4}px), calc(-50% + ${bounceY * 0.4}px)) scale(1.2) rotate(-15deg);
                            opacity: 1;
                        }
                        50% {
                            transform: translate(calc(-50% + ${bounceX * 0.8}px), calc(-50% + ${bounceY * 0.8}px)) scale(1) rotate(10deg);
                            opacity: 0.9;
                        }
                        100% {
                            transform: translate(calc(-50% + ${bounceX}px), calc(-50% + ${bounceY}px)) scale(0.4) rotate(0deg);
                            opacity: 0;
                        }
                    }
                `;
                
                // Add keyframes to document
                const style = document.createElement('style');
                style.textContent = keyframes;
                document.head.appendChild(style);
                
                // Apply faster animation (reduced from 1.2s to 0.8s)
                popupCat.style.animation = `${keyframeName} 0.8s ease-out forwards`;
                popupCat.style.animationDelay = (i * 0.05) + 's'; // Reduced delay
                
                document.body.appendChild(popupCat);
                
                // Remove after animation completes and clean up keyframes
                setTimeout(() => {
                    if (popupCat.parentNode) {
                        popupCat.parentNode.removeChild(popupCat);
                    }
                    if (style.parentNode) {
                        style.parentNode.removeChild(style);
                    }
                }, 800 + (i * 50)); // Adjusted timing
            }
        }

        // Spawn bouncing tracking cats on right click
        function spawnTrackingCat(clickX, clickY) {
            if (spawnedCats.length >= 200) return; // Limit to 200 cats
            
            const spawnedCat = document.createElement('div');
            spawnedCat.className = 'spawned-cat';
            
            // Random cat image for variety
            const catType = Math.floor(Math.random() * catImages.length);
            const randomImage = catImages[catType];
            spawnedCat.style.backgroundImage = `url('${randomImage}')`;
            spawnedCat.setAttribute('data-cat-type', catType);
            
            // Starting position
            const catSize = 120;
            const x = Math.max(catSize/2, Math.min(window.innerWidth - catSize/2, clickX));
            const y = Math.max(catSize/2, Math.min(window.innerHeight - catSize/2, clickY));
            
            // Random velocity for bouncing
            const speed = 2 + Math.random() * 4; // Random speed between 2-6px per frame
            const angle = Math.random() * 2 * Math.PI;
            const vx = Math.cos(angle) * speed;
            const vy = Math.sin(angle) * speed;
            
            // Create eyes for the spawned cat
            const eyesContainer = document.createElement('div');
            eyesContainer.className = 'eyes';
            
            const leftEye = document.createElement('div');
            leftEye.className = 'eye';
            const leftPupil = document.createElement('div');
            leftPupil.className = 'pupil';
            leftEye.appendChild(leftPupil);
            
            const rightEye = document.createElement('div');
            rightEye.className = 'eye';
            const rightPupil = document.createElement('div');
            rightPupil.className = 'pupil';
            rightEye.appendChild(rightPupil);
            
            eyesContainer.appendChild(leftEye);
            eyesContainer.appendChild(rightEye);
            spawnedCat.appendChild(eyesContainer);
            
            document.body.appendChild(spawnedCat);
            
            // Add to spawned cats array with physics properties
            const catData = {
                element: spawnedCat,
                leftPupil: leftPupil,
                rightPupil: rightPupil,
                x: x,
                y: y,
                vx: vx,
                vy: vy,
                catType: catType,
                birthTime: Date.now()
            };
            
            spawnedCats.push(catData);
            updateCatCounter();
            
            // Remove after 30 seconds
            setTimeout(() => {
                const index = spawnedCats.indexOf(catData);
                if (index > -1) {
                    // Fade out animation
                    catData.element.style.animation = 'fadeOut 0.5s ease-out forwards';
                    
                    setTimeout(() => {
                        spawnedCats.splice(index, 1);
                        if (catData.element.parentNode) {
                            catData.element.parentNode.removeChild(catData.element);
                        }
                        updateCatCounter();
                    }, 500);
                }
            }, 30000); // 30 seconds
        }

        // Create sparkles
        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.animationDelay = Math.random() * 3 + 's';
            sparkle.style.animationDuration = (Math.random() * 3 + 2) + 's';
            sparklesContainer.appendChild(sparkle);

            // Remove sparkle after animation
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.parentNode.removeChild(sparkle);
                }
            }, 5000);
        }

        // Create sparkles periodically
        setInterval(createSparkle, 500);

        // Start animation loop
        animate();

        // Initialize cat gaze on page load
        updateCatGaze();
        updateCatRotation();

        // Handle window resize
        window.addEventListener('resize', () => {
            updateCatGaze();
            updateCatRotation();
        });

        // Hide default cursor and show custom one
        document.addEventListener('mouseenter', () => {
            cursor.style.display = 'block';
        });

        document.addEventListener('mouseleave', () => {
            cursor.style.display = 'none';
        });
    </script>
</body>
</html>